<!-- Feature-Tour Buttons -->
<div class="fixed-action-btn" style="bottom: 4.5em; right: 2em;">
  <a class="btn-floating btn-large tooltipped orange darken-2 z-depth-3" data-position="left" data-delay="50" data-tooltip="Tour the dashboard!" href="javascript:void(0);" onclick="startIntro()">
    <i class="large material-icons" style="font-size:2.7em;">question_answer</i>
  </a>
  <ul>
    <li><a class="btn-floating red tooltipped" data-position="left" data-delay="50" data-tooltip="Fridge?" href="javascript:void(0);" onclick="startIntro2();"><i class="material-icons">shopping_basket</i></i></a></li>
  </ul>
</div>

<!-- Feature-Tour Tour-1-Step-1 && Tour-2-Step-1 -->
<div class="container" id="step1">
  <h5 class="center-align"> </h5>
  <div class="row">
    <!-- Feature-Tour T2-S4 -->
    <div class="col s4" id="T2-Step4">
      <div class="card medium card-small blue-grey darken-1 hoverable">
        <div class="card-image">
          <img src="http://internetcafedevotions.com/wp-content/uploads/2010/03/Copy-of-iStock_000003737014XSmall.jpg">
        </div>
        <div class="card-content">
          <span ng-if="expiring.length > 0 || expiringToday.length > 0" class="card-title activator">Expiring Soon </span>
          <span ng-if="expiring.length === 0 && expiringToday.length === 0" class="card-title">Expiring Soon </span>
            <p ng-if="expiring.length > 0">You have ${{expireAmount.toFixed(2)}} worth of food expiring soon</p>
            <p ng-if="expiringToday.length > 1">You have {{expiringToday.length}} items expiring today!<p>
            <p ng-if="expiringToday.length === 1">You have 1 item expiring today!<p>
            <p ng-if="expiring.length ===0 && expiringToday.length === 0">You have nothing expiring in the fridge</p>
        </div>
        <div class="card-reveal">
          <span class="card-title grey-text text-darken-4"><i class="material-icons small right">close</i></span>
          Expiring soon:
          <div ng-if="expiring.length > 0" ng-repeat="subitem in expiring">
            <li>{{subitem.name}}</li>
          </div>
          <br/>
          <div ng-if="expiringToday.length > 0" ng-repeat="subitem in expiringToday">
            Expiring today:
            <li>{{subitem.name}}</li>
          </div>
        </div>
      </div>
    </div>
    <!-- Feature-Tour T2-S2 -->
    <div class="col s4" id="T2-Step2">
      <div class="card medium card-small blue-grey darken-1 hoverable">
        <div class="card-image">
        <img src="http://www.appliancist.com/stainless-steel-refrigerator-atag-ka2111dq-open.jpg">
        </div>
        <div class="card-content">
          <span ng-if="fridgeData.length > 0" class="card-title activator step">Fridge</span>
          <span ng-if="fridgeData.length === 0" class="card-title">Fridge</span>
          <p ng-if="fridgeData.length === 0 "> You have nothing in your fridge</p>
          <div ng-if="fridgeData.length > 0">
            <p>Your fridge is currently worth ${{freshValue.toFixed(2)}}</p>
          </div>
        </div>
        <div class="card-reveal">
          <span class="card-title grey-text text-darken-4" for="{{item}}"><i class="material-icons small right">close</i></span>
          <p>Items in your fridge: {{fridgeData.length}} </p>
          <div ng-if="highestQtyFridge.length">You have a lot of:
            <li ng-repeat="item in highestQtyFridge">{{item.name}}</li>
          </div>
          <br/>
          <div ng-if="lowestQtyFridge.length">You don't have a lot of:
          <li ng-repeat="item in lowestQtyFridge">{{item.name}}</li>
          </div>
        </div>
        <div class="card-action">
          <!-- Feature-Tour T2-S3 -->
          <a href="#/fridge" id="T2-Step3">Go to the Fridge</a>
        </div>
      </div>
    </div>

    <!-- Feature-Tour T2-S5 -->
    <div class="col s4" id="T2-Step5">
      <div class="card medium card-small blue-grey darken-1 hoverable">
        <div class="card-image">
          <img src="http://www.clipartbest.com/cliparts/niB/7aa/niB7aaqiA.jpeg">
        </div>
        <div class="card-content">
          <span ng-if="expired.length > 0" class="card-title activator">Expired</span>
          <span ng-if="expired.length === 0" class="card-title">Expired</span>
          <p ng-if="expired.length > 1">You let {{expired.length}} items worth ${{expiredValue.toFixed(2)}} expire!</p>
          <p ng-if="expired.length === 1">You let 1 item worth ${{expiredValue.toFixed(2)}} expire!</p>
          <p ng-if="expired.length === 0">You have no expired items in the fridge</p>
        </div>
        <div class="card-reveal">
          <span class="card-title grey-text text-darken-4" for="{{item}}"><i class="material-icons small right">close</i></span>
          The following items have expired:
          <br></br>
          <div ng-repeat="subitem in expired">
            <li>${{(subitem.qty * subitem.price).toFixed(2)}} of {{subitem.name}} on {{subitem.expiration | date: 'shortDate'}}</li>
          </div>
        </div>
      </div>
    </div>

  </div>
  <!-- Feature-Tour T1-S2 -->
  <div class="row" id="T1-Step2">
  <!-- Feature-Tour T1-S3 -->
    <div class="col s6" id="T1-Step3">
      <div class="card card-small blue-grey darken-1 hoverable">
        <div class="card-image waves-effect waves-block waves-light"></div>
        <div class="card-content">
          <span ng-if="allRecipes.length > 0" class="card-title activator white-text text-darken-4">Recipes</span>
          <span ng-if="allRecipes.length === 0" class="card-title white-text text-darken-4">Recipes</span>
          <p ng-if="allRecipes.length === 0">You don't have any saved recipes</p>
          <p ng-if="allRecipes.length > 1">You have {{allRecipes.length}} saved recipes</p>
          <p ng-if="allRecipes.length === 1">You have 1 saved recipe</p>
        </div>
        <div class="card-reveal">
          <span class="card-title grey-text text-darken-4"><i class="material-icons small right">close</i></span>
          <div ng-if="allRecipes.length > 0">
            <p>Your priciest recipe, {{mostExpensiveRecipe.title}}, costs ${{mostExpensiveRecipe.price.toFixed(2)}}</p>
            <p ng-hide="hide">Your cheapest recipe, {{leastExpensiveRecipe.title}}, costs ${{leastExpensiveRecipe.price.toFixed(2)}}</p>
          </div>
          <div ng-if="allRecipes.length === 0"> You have no recipes</div>
        </div>
        <div class="card-action">
        <!-- Feature-Tour T1-S4 -->
          <a href="#/recipes" id="T1-Step4">See Recipes</a>
        </div>
      </div>
    </div>
    <!-- Feature-Tour T1-S5 -->
    <div class="col s6" id="T1-Step5">
      <div class="card card-small blue-grey darken-1 hoverable">
        <div class="card-image waves-effect waves-block waves-light"></div>
        <div class="card-content">
          <span class="card-title activator white-text text-darken-4">Saved Lists</span>
          <p ng-if="listsCount === 0">You don't have any saved shopping lists</p>
          <p ng-if="listsCount === 1">You have 1 saved shopping list</p>
          <p ng-if="listsCount > 1"> You have {{listsCount}} saved shopping lists</p>
        </div>
        <div class="card-reveal">
          <span class="card-title grey-text text-darken-4"><i class="material-icons small right">close</i></span>
          <p ng-if="listsCount > 0"> Your priciest list, {{mostExpensiveList.list_name || mostExpensiveList.date}}, costs ${{mostExpensiveList.totalPrice}}</p>
          <p ng-hide="hideList"> Your cheapest list, {{leastExpensiveList.list_name || leastExpensiveList.date}}, costs ${{leastExpensiveList.totalPrice}}</p>
        </div>
        <div class="card-action">
          <!-- Feature-Tour T1-S6 -->
          <a class="col s6" href="#/saved-lists" id="T1-Step6">See Saved Lists</a>
          <a href="#/create-list">Create New List</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function(){
    $('.tooltipped').tooltip({delay: 50});
  });

  function startIntro(){
    var intro = introJs();
      intro.setOptions({
        steps: [
          {
            element: document.querySelector('#step1'),
            intro: "This is the dashboard.  This is where the action happens!",
            position: 'left'
          },
          {
            element: document.querySelector('#T1-Step2'),
            intro: "At its most basic, WTF takes recipes as input and outputs your grocery list!",
            position:"top"
          },
          {
            element: document.querySelector('#T1-Step3'),
            intro: "Do you have your favorite lasagna recipe handy?",
            position: 'right'
          },
          {
            element: document.querySelector('#T1-Step4'),
            intro: "Click here to input your favorite recipes!",
            position: 'right'
          },
          {
            element: document.querySelector('#T1-Step5'),
            intro: "Do you have favorite recipes?",
            position: 'left'
          },
          {
            element: document.querySelector('#T1-Step6'),
            intro: "Click here to turn your most-used recipes into easily accessible shopping lists!",
            position: 'left'
          }
        ]
      });
    intro.start();
  }

  function startIntro2(){
    var intro2 = introJs();
      intro2.setOptions({
        steps: [
          {
            element: document.querySelector('#step1'),
            intro: "Now let's learn about The Fridge!",
            position: 'bottom'
          },
          {
            element: document.querySelector('#T2-Step2'),
            intro: "This is a digital representation of your fridge's contents!",
            position:"bottom"
          },
          {
            element: document.querySelector('#T2-Step3'),
            intro: "Click here to begin inputting the contents of your fridge!",
            position: 'bottom'
          },
          {
            element: document.querySelector('#T2-Step4'),
            intro: "This section keeps you informed about what's about to expire in your fridge!",
            position: 'right'
          },
          {
            element: document.querySelector('#T2-Step5'),
            intro: "This section keeps track of what has already expired!",
            position: 'left'
          }
        ]
      });
    intro2.start();
  }

 </script>
